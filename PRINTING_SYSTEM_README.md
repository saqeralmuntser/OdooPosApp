# ูุธุงู ุงูุทุจุงุนุฉ ุงููุชูุฏู ูู Flutter POS

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุทุจุงุนุฉ ูุชูุฏู ููุณุชูู ููุชุดู ุงูุทุงุจุนุงุช ูู ุงูุดุจูุฉ ุชููุงุฆูุงู ููุฏูุฑูุง ูุญููุงูุ ูุน ุฏุนู queue ูุชูุฏู ููุทุจุงุนุฉ ูุฑุจุท ุงูุทุงุจุนุงุช ูุน POS Config. ุงููุธุงู ูุณุชุฎุฏู ุจุฑูุชูููู ESC-POS ููุชูุงุตู ุงููุจุงุดุฑ ูุน ุงูุทุงุจุนุงุช ุงูุญุฑุงุฑูุฉ.

## ุงูููููุงุช ุงููุถุงูุฉ

### 1. Network Printer Discovery (`network_printer_discovery.dart`)
- **ุงูุชุดุงู ุชููุงุฆู ููุทุงุจุนุงุช**: ูุณุญ ุงูุดุจูุฉ ุงููุญููุฉ ููุนุซูุฑ ุนูู ุทุงุจุนุงุช ESC-POS
- **ุงูุชุญูู ูู ุงูุงุชุตุงู**: ูุญุต ุงูุจูุฑุชุงุช ุงูุดุงุฆุนุฉ (9100, 515, 631, ุฅูุฎ)
- **ุชุญุฏูุฏ ููุน ุงูุทุงุจุนุฉ**: ูุญุงููุฉ ุชุญุฏูุฏ ุงูุตุงูุน ูุงูููุฏูู
- **ุงูุชุญูู ูู ุงูุญุงูุฉ**: ูุฑุงูุจุฉ ุญุงูุฉ ุงูุทุงุจุนุงุช (ูุชุตู/ุบูุฑ ูุชุตู)
- **ุงูุชูููู ุงูุชููุงุฆู**: ุฑุจุท ุงูุทุงุจุนุงุช ุงูููุชุดูุฉ ูุน POS Config

### 2. ESC-POS Service (`escpos_service.dart`)
- **ุฃูุงูุฑ ESC-POS**: ุชูููุฏ ุฃูุงูุฑ ุทุจุงุนุฉ ูุชูุงููุฉ ูุน ุงูุทุงุจุนุงุช ุงูุญุฑุงุฑูุฉ
- **ุชูุณูู ุงูุฅูุตุงูุงุช**: ุชุญููู ุจูุงูุงุช ุงูุทูุจ ุฅูู ุชูุณูู ุทุจุงุนุฉ ุงุญุชุฑุงูู
- **ุฏุนู QR Codes**: ุทุจุงุนุฉ ุฑููุฒ QR ูุชูุงููุฉ ูุน ZATCA
- **ูุทุน ุงููุฑู ุงูุชููุงุฆู**: ุฃูุงูุฑ ูุทุน ุงููุฑู ููุชุญ ุฏุฑุฌ ุงูููุฏ
- **ุฏุนู ุงูุฎุทูุท ุงูุนุฑุจูุฉ**: ุชูุณูู ุงููุตูุต ุจุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

### 3. Print Queue Manager (`print_queue_manager.dart`)
- **ูุธุงู Queue ูุชูุฏู**: ุฅุฏุงุฑุฉ ุทูุงุจูุฑ ุงูุทุจุงุนุฉ ูุนุฏุฉ ุทุงุจุนุงุช
- **ุฃููููุงุช ุงูุทุจุงุนุฉ**: ุชุฑุชูุจ ุงูููุงู ุญุณุจ ุงูุฃููููุฉ
- **ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุฅุนุงุฏุฉ ูุญุงููุฉ ุงูููุงู ุงููุงุดูุฉ ุชููุงุฆูุงู
- **ูุฑุงูุจุฉ ุงูุญุงูุฉ**: ุชุชุจุน ุญุงูุฉ ุงูููุงู (ูุนููุ ููุฏ ุงููุนุงูุฌุฉุ ููุชููุ ูุงุดู)
- **ุงูุญูุธ ุงููุญูู**: ุญูุธ ุงูููุงู ูุญููุงู ููุงุณุชูุฑุงุฑูุฉ

### 4. Network Printer Model (`network_printer.dart`)
- **NetworkPrinter**: ูููุฐุฌ ุดุงูู ููุทุงุจุนุฉ ูุน ุงูููุงุตูุงุช ูุงูุญุงูุฉ
- **PrinterCapabilities**: ูุฏุฑุงุช ุงูุทุงุจุนุฉ (ูุทุน ุงููุฑูุ ุฏุฑุฌ ุงูููุฏุ QR codes)
- **PrintJob**: ูููุฐุฌ ููุงู ุงูุทุจุงุนุฉ ูุน ุงูุจูุงูุงุช ูุงูุญุงูุฉ
- **Enums**: ุชุนุฏุงุฏุงุช ูุฃููุงุน ุงูุทุงุจุนุงุช ูุญุงูุงุชูุง ูููุงู ุงูุทุจุงุนุฉ

### 5. Advanced Printer Service (`printer_service.dart`)
- **ุฅุฏุงุฑุฉ ุดุงููุฉ**: ุชูุณูู ุฌููุน ุฎุฏูุงุช ุงูุทุจุงุนุฉ
- **Discovery Management**: ุฅุฏุงุฑุฉ ุนูููุฉ ุงูุงูุชุดุงู ูุงูุชูููู
- **Queue Integration**: ุฏูุฌ ูุธุงู ุงูุทูุงุจูุฑ ูุน ุงูุทุจุงุนุฉ
- **Real-time Updates**: ุชุญุฏูุซุงุช ููุฑูุฉ ููุทุงุจุนุงุช ูุงูููุงู
- **Legacy Support**: ุฏุนู ููุทุฑู ุงููุฏููุฉ ููุชูุงูู

### 2. Widget ุงูุฅูุตุงู ุงููุงุจู ููุทุจุงุนุฉ (`printable_receipt.dart`)

#### PrintableReceipt
- Widget ูุฎุตุต ููุทุจุงุนุฉ (ุจุนุฑุถ 384 ุจูุณู ูุทุงุจุนุงุช 80ูู)
- ูุนุฑุถ:
  - ูุนูููุงุช ุงูุดุฑูุฉ ูุงูุดุนุงุฑ
  - ุฑูุฒ QR ูุชูุงูู ูุน ZATCA
  - ุชูุงุตูู ุงูุทูุจ ูุงูุนูุงุตุฑ
  - ููุฎุต ุงูุถุฑุงุฆุจ ูุงููุฏููุนุงุช
  - ูุนูููุงุช ุงูุนููู (ุฅู ูุฌุฏุช)

### 3. ุงูุชูุงูู ูุน ุงูู Provider

ุชู ุฏูุฌ ุฎุฏูุฉ ุงูุทุจุงุนุฉ ูู `EnhancedPOSProvider`:

#### ุงูุทุฑู ุงููุถุงูุฉ:
- `initializePrinter({String? iotBoxUrl})`: ุชููุฆุฉ ุงูุทุงุจุนุฉ
- `printReceipt({...})`: ุทุจุงุนุฉ ุฅูุตุงู ูุน ุจูุงูุงุช ูุญุฏุฏุฉ
- `printCurrentOrderReceipt()`: ุทุจุงุนุฉ ุฅูุตุงู ุงูุทูุจ ุงูุญุงูู
- `isPrinterAvailable`: ูุญุต ุชููุฑ ุงูุทุงุจุนุฉ
- `isPrinting`: ูุญุต ุญุงูุฉ ุงูุทุจุงุนุฉ

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงูุทุจุงุนุฉ ุงูุชููุงุฆูุฉ

ุนูุฏ ุงูุถุบุท ุนูู "Validate" ูู ุดุงุดุฉ ุงูุฏูุน:
1. ูุชู ุชุฃููุฏ ุงูุทูุจ
2. **ุทุจุงุนุฉ ุงูุฅูุตุงู ุชููุงุฆูุงู**
3. ุนุฑุถ ุดุงุดุฉ ุงูุฅูุตุงู

### 2. ุงูุทุจุงุนุฉ ุงููุฏููุฉ

ูู ุดุงุดุฉ ุงูุฅูุตุงู:
1. ุงูุถุบุท ุนูู ุฒุฑ "ุทุจุงุนุฉ ุงูุฅูุตุงู"
2. ูุชู ุฅุฑุณุงู ุงูุฅูุตุงู ููุทุงุจุนุฉ

### 3. ุชููุฆุฉ ุงูุทุงุจุนุฉ

#### ููุงุชุตุงู ูุน Odoo IoT Box:
```dart
posProvider.initializePrinter(iotBoxUrl: 'http://192.168.1.100:8069');
```

#### ููุทุจุงุนุฉ ุนุจุฑ ุงููุชุตูุญ:
```dart
posProvider.initializePrinter(); // ุจุฏูู URL
```

## ุฅุนุฏุงุฏ ุงูุทุงุจุนุฉ ูุน Odoo

### 1. ุฅุนุฏุงุฏ IoT Box
1. ูู ุจุชูุตูู ุงูุทุงุจุนุฉ ุงูุญุฑุงุฑูุฉ ุจู IoT Box
2. ุชุฃูุฏ ูู ุงุชุตุงู IoT Box ุจููุณ ุงูุดุจูุฉ
3. ุงุฎุชุจุฑ ุงูุงุชุตุงู ุนุจุฑ `http://iot-box-ip:8069/hw_proxy/hello`

### 2. ุชูููู ุงูุทุงุจุนุฉ ูู Odoo
1. ุงูุชูู ุฅูู: Point of Sale > Configuration > PoS Printers
2. ุฃุถู ุทุงุจุนุฉ ุฌุฏูุฏุฉ
3. ุฑุจุทูุง ุจู POS Config ุงููุทููุจ

### 3. ุงุฎุชุจุงุฑ ุงูุทุจุงุนุฉ
```dart
final printResult = await posProvider.printCurrentOrderReceipt();
if (printResult['successful']) {
  print('ุชู ุงูุทุจุงุนุฉ ุจูุฌุงุญ');
} else {
  print('ูุดู ูู ุงูุทุจุงุนุฉ: ${printResult['message']}');
}
```

## ูููุฒุงุช ุงููุธุงู

### โ ุงููููุฐุฉ ุญุงููุงู:
- ุทุจุงุนุฉ ุชููุงุฆูุฉ ุนูุฏ ุชุฃููุฏ ุงูุทูุจ
- ุทุจุงุนุฉ ูุฏููุฉ ูู ุดุงุดุฉ ุงูุฅูุตุงู
- ุฏุนู IoT Box ูุทุจุงุนุฉ ุงููุชุตูุญ
- ุฅูุตุงูุงุช ููุณูุฉ ุจุดูู ุงุญุชุฑุงูู
- ุฑููุฒ QR ูุชูุงููุฉ ูุน ZATCA
- ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ

### ๐ ููุชุทููุฑ ุงููุณุชูุจูู:
- ุชุญููู Widget ุฅูู ุตูุฑุฉ ุจุทุฑููุฉ ุฃูุซุฑ ุฏูุฉ
- ุฏุนู ุทุงุจุนุงุช USB ูุจุงุดุฑุฉ
- ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุทุงุจุนุฉ
- ุทุจุงุนุฉ ุชูุงุฑูุฑ ุฅุถุงููุฉ
- ุฏุนู ุฃุญุฌุงู ูุฑู ูุฎุชููุฉ

## ููุชุจุงุช ูุถุงูุฉ

```yaml
dependencies:
  flutter_to_image: ^0.0.3  # ูุชุญููู Widget ุฅูู ุตูุฑุฉ
  printing: ^5.12.0         # ููุทุจุงุนุฉ ุงููุชูุฏูุฉ
  pdf: ^3.10.7             # ูุฏุนู PDF
```

## ุฑุณุงุฆู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### "Connection to Printer failed"
- ุชุญูู ูู ุงุชุตุงู IoT Box
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุทุงุจุนุฉ
- ุฑุงุฌุน ุนููุงู IP ุงูุฎุงุต ุจู IoT Box

### "No Printer Available"
- ูู ุจุชููุฆุฉ ุงูุทุงุจุนุฉ ุฃููุงู ุจุงุณุชุฎุฏุงู `initializePrinter()`
- ุชุญูู ูู ูุฌูุฏ ุงูุทุงุจุนุฉ ูู ุงููุธุงู

### ุฃุฎุทุงุก ุงูุดุจูุฉ
- ุชุญูู ูู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ุชุฃูุฏ ูู ูุฌูุฏ IoT Box ูู ููุณ ุงูุดุจูุฉ

## ุงูุฏุนู ุงูููู

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ:
1. ุชุญูู ูู console logs ููุชูุงุตูู
2. ุงุฎุชุจุฑ ุงูุงุชุตุงู ูุน IoT Box ูุจุงุดุฑุฉ
3. ุชุฃูุฏ ูู ุชูููู ุงูุทุงุจุนุฉ ูู Odoo ุจุดูู ุตุญูุญ

---

**ููุงุญุธุฉ**: ูุฐุง ุงููุธุงู ูุชูุงูู ูุน ูุนุงููุฑ ุงูููุชุฑุฉ ุงูุฅููุชุฑูููุฉ ุงูุณุนูุฏูุฉ (ZATCA) ููุฏุนู ุฑููุฒ QR ุงููุทููุจุฉ.
